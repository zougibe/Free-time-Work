<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TimeTrack Pro - Time & Attendance</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <style>
        :root {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --primary-light: #93c5fd;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --success: #10b981;
            --info: #3b82f6;

            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;

            --spacing-xs: 0.5rem;
            --spacing-sm: 0.75rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;

            --radius-sm: 0.25rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;

            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

            --transition: all 0.2s ease-in-out;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: "Inter", sans-serif;
        }

        body {
            background: var(--gray-50);
            color: var(--gray-800);
            line-height: 1.5;
        }

        .header {
            background: white;
            border-bottom: 1px solid var(--gray-200);
            padding: var(--spacing-md) var(--spacing-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .logo {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.5rem;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .logo i {
            font-size: 1.25rem;
        }

        .nav-menu {
            display: flex;
            gap: var(--spacing-sm);
        }

        .nav-link {
            text-decoration: none;
            color: var(--gray-600);
            font-weight: 500;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            transition: var(--transition);
            font-size: 0.875rem;
        }

        .nav-link:hover,
        .nav-link.active {
            background: var(--gray-100);
            color: var(--primary);
        }

        .nav-link i {
            margin-right: var(--spacing-xs);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.25rem;
            color: var(--gray-600);
            cursor: pointer;
        }

        main {
            padding: 6rem var(--spacing-lg) var(--spacing-xl);
            max-width: 1200px;
            margin: 0 auto;
        }

        .page-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: var(--spacing-xl);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .page-title i {
            color: var(--primary);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            border: 1px solid var(--gray-200);
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--spacing-md);
            color: var(--gray-800);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title i {
            color: var(--gray-500);
        }

        .card-subtitle {
            font-size: 0.875rem;
            color: var(--gray-500);
            margin-bottom: var(--spacing-md);
        }

        .form-group {
            margin-bottom: var(--spacing-md);
        }

        .form-label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--gray-700);
        }

        .form-control {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            font-weight: 500;
            font-size: 0.875rem;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .btn i {
            font-size: 0.875rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-outline {
            background: transparent;
            border-color: var(--gray-300);
            color: var(--gray-700);
        }

        .btn-outline:hover {
            background: var(--gray-50);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #0d9b6c;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background: #d97706;
        }

        .btn-sm {
            padding: var(--spacing-xs) var(--spacing-sm);
            font-size: 0.75rem;
        }

        .btn-group {
            display: flex;
            gap: var(--spacing-sm);
        }

        .time-display {
            text-align: center;
            font-size: 2rem;
            font-weight: 600;
            margin: var(--spacing-md) 0;
            color: var(--gray-900);
            font-family: monospace;
        }

        .status-message {
            text-align: center;
            padding: var(--spacing-sm);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-md);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .status-message i {
            margin-right: var(--spacing-xs);
        }

        .success {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .error {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .warning {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .info {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--info);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: var(--spacing-lg);
            font-size: 0.875rem;
        }

        th,
        td {
            padding: var(--spacing-sm) var(--spacing-md);
            text-align: left;
            border-bottom: 1px solid var(--gray-200);
        }

        th {
            background: var(--gray-50);
            font-weight: 600;
            color: var(--gray-700);
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
        }

        tr:hover {
            background: var(--gray-50);
        }

        .badge {
            display: inline-block;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: capitalize;
        }

        .badge-active {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-approved {
            background: #dcfce7;
            color: #166534;
        }

        .badge-rejected {
            background: #fee2e2;
            color: #991b1b;
        }

        .stat-card {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .stat-icon.primary {
            background: var(--primary-light);
            color: var(--primary);
        }

        .stat-icon.success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .stat-icon.warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .stat-icon.danger {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .stat-content {
            flex: 1;
        }

        .stat-title {
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        .stat-value {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--gray-900);
        }

        .filters {
            display: flex;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .chart-container {
            height: 300px;
            margin-top: var(--spacing-lg);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(2px);
        }

        .modal {
            background: white;
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            max-width: 500px;
            width: 90%;
            box-shadow: var(--shadow-lg);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--spacing-md);
            color: var(--gray-800);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-md);
            margin-top: var(--spacing-lg);
        }

        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            background: white;
            box-shadow: var(--shadow-md);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            max-width: 350px;
        }

        .notification i {
            font-size: 1.25rem;
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--danger);
        }

        .notification.warning {
            border-left: 4px solid var(--warning);
        }

        .notification.info {
            border-left: 4px solid var(--primary);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .payroll-report {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin-top: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
        }

        .payroll-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--gray-200);
        }

        .payroll-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--gray-800);
        }

        .payroll-period {
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        .payroll-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .payroll-total {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-align: right;
            margin-top: var(--spacing-lg);
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--gray-200);
        }

        /* Mobile styles */
        @media (max-width: 768px) {
            .header {
                padding: var(--spacing-sm) var(--spacing-md);
            }

            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                padding: var(--spacing-md);
                flex-direction: column;
                box-shadow: var(--shadow-md);
            }

            .nav-menu.active {
                display: flex;
            }

            .mobile-menu-btn {
                display: block;
            }

            main {
                padding: 5rem var(--spacing-md) var(--spacing-lg);
            }

            .filters {
                flex-direction: column;
                gap: var(--spacing-sm);
            }

            .filter-group {
                min-width: 100%;
            }

            .btn-group {
                flex-wrap: wrap;
            }

            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <header class="header">
        <a href="#" class="logo">
            <i class="fas fa-clock"></i> TimeTrack Pro
        </a>
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </button>
        <nav class="nav-menu">
            <a href="#dashboard" class="nav-link active">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </a>
            <a href="#" class="nav-link" onclick="showManagerPortal()">
                <i class="fas fa-user-shield"></i> Manager Portal
            </a>
            <a href="#" class="nav-link" onclick="showPayrollReport()">
                <i class="fas fa-file-invoice-dollar"></i> Payroll
            </a>
            <a href="#" class="nav-link" onclick="showHelp()">
                <i class="fas fa-question-circle"></i> Help
            </a>
            <a href="#" class="nav-link" onclick="showSettings()">
                <i class="fas fa-cog"></i> Settings
            </a>
        </nav>
    </header>

    <main>
        <h1 class="page-title">
            <i class="fas fa-tachometer-alt"></i> Employee Dashboard
        </h1>

        <div class="grid">
            <!-- Clock In/Out Card -->
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-clock"></i> Time Clock
                </h2>
                <div class="form-group">
                    <label for="employeeSelect" class="form-label">Employee</label>
                    <select id="employeeSelect" class="form-control">
                        <option value="">Select Employee</option>
                    </select>
                </div>
                <div id="currentTime" class="time-display">00:00:00</div>
                <button id="clockBtn" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> Clock In
                </button>
                <div id="clockStatus" class="status-message"></div>
            </div>

            <!-- Today's Summary -->
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-calendar-day"></i> Today's Summary
                    <button class="btn btn-outline btn-sm" onclick="refreshSummary()">
                        <i class="fas fa-sync"></i> Refresh
                    </button>
                </h2>

                <div class="stat-card">
                    <div class="stat-icon primary">
                        <i class="fas fa-user-clock"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-title">Clocked In</div>
                        <div class="stat-value" id="clockedInCount">0</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon success">
                        <i class="fas fa-business-time"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-title">Total Hours</div>
                        <div class="stat-value" id="totalHoursToday">0.0</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon warning">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-title">Average Hours</div>
                        <div class="stat-value" id="averageHours">0.0</div>
                    </div>
                </div>

                <div id="summaryChart" class="chart-container"></div>
            </div>
        </div>

        <!-- Timesheet Management -->
        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-table"></i> Timesheet Management
                <div class="btn-group">
                    <button class="btn btn-primary btn-sm" onclick="exportTimesheet()">
                        <i class="fas fa-download"></i> Export
                    </button>
                    <button class="btn btn-success btn-sm" onclick="generatePayroll()">
                        <i class="fas fa-file-invoice-dollar"></i> Payroll
                    </button>
                </div>
            </h2>

            <div class="filters">
                <div class="filter-group">
                    <label for="departmentFilter" class="form-label">Department</label>
                    <select id="departmentFilter" class="form-control">
                        <option value="">All Departments</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="dateFilter" class="form-label">Date</label>
                    <input type="date" id="dateFilter" class="form-control" />
                </div>

                <div class="filter-group">
                    <label for="statusFilter" class="form-label">Status</label>
                    <select id="statusFilter" class="form-control" onchange="filterTimesheet()">
                        <option value="">All Statuses</option>
                        <option value="active">Active</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="employeeFilter" class="form-label">Employee</label>
                    <select id="employeeFilter" class="form-control" onchange="filterTimesheet()">
                        <option value="">All Employees</option>
                    </select>
                </div>
            </div>

            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th>Employee</th>
                            <th>Department</th>
                            <th>Date</th>
                            <th>Clock In</th>
                            <th>Clock Out</th>
                            <th>Hours</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="timesheetTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Analytics Dashboard -->
        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-chart-pie"></i> Analytics Dashboard
            </h2>
            <div class="grid">
                <div>
                    <div id="departmentChart" class="chart-container"></div>
                </div>
                <div>
                    <div id="trendChart" class="chart-container"></div>
                </div>
                <div>
                    <div id="statusChart" class="chart-container"></div>
                </div>
            </div>
        </div>

        <!-- Payroll Report (Hidden by default) -->
        <div id="payrollReport" class="payroll-report" style="display: none;">
            <div class="payroll-header">
                <h2 class="payroll-title">
                    <i class="fas fa-file-invoice-dollar"></i> Payroll Report
                </h2>
                <div class="btn-group">
                    <button class="btn btn-outline btn-sm" onclick="printPayroll()">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="btn btn-primary btn-sm" onclick="exportPayroll()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label for="payrollStartDate" class="form-label">Start Date</label>
                    <input type="date" id="payrollStartDate" class="form-control" />
                </div>

                <div class="filter-group">
                    <label for="payrollEndDate" class="form-label">End Date</label>
                    <input type="date" id="payrollEndDate" class="form-control" />
                </div>

                <div class="filter-group">
                    <label class="form-label">&nbsp;</label>
                    <button class="btn btn-primary" onclick="generatePayrollReport()">
                        <i class="fas fa-calculator"></i> Generate Report
                    </button>
                </div>
            </div>

            <div id="payrollSummary" class="payroll-summary">
                <!-- Will be populated by JavaScript -->
            </div>

            <div style="overflow-x: auto;">
                <table id="payrollTable">
                    <thead>
                        <tr>
                            <th>Employee</th>
                            <th>Department</th>
                            <th>Total Hours</th>
                            <th>Hourly Rate</th>
                            <th>Gross Pay</th>
                        </tr>
                    </thead>
                    <tbody id="payrollTableBody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <div id="payrollTotal" class="payroll-total">
                Total Payroll: $0.00
            </div>
        </div>
    </main>

    <!-- Modal Container -->
    <div id="modalContainer"></div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <script>
        // Configuration
        const CONFIG = {
            MANAGER_PASSWORD: "admin123",
            DEPARTMENTS: ["Engineering", "Marketing", "HR", "Sales", "Finance", "Operations"],
            SHIFTS: {
                morning: { start: "07:00", end: "15:00" },
                day: { start: "09:00", end: "17:00" },
                evening: { start: "13:00", end: "21:00" },
                night: { start: "21:00", end: "05:00" }
            },
            PAY_PERIOD: "weekly", // weekly, bi-weekly, monthly
            DEFAULT_START_DATE: new Date(new Date().setDate(new Date().getDate() - 7)),
            DEFAULT_END_DATE: new Date()
        };

        // State Management
        let STATE = {
            employees: [
                { id: 1, name: "John Doe", department: "Engineering", hourlyRate: 35.50 },
                { id: 2, name: "Jane Smith", department: "Marketing", hourlyRate: 32.75 },
                { id: 3, name: "Mike Johnson", department: "HR", hourlyRate: 28.90 },
                { id: 4, name: "Sarah Williams", department: "Sales", hourlyRate: 30.25 },
                { id: 5, name: "David Brown", department: "Finance", hourlyRate: 40.00 },
                { id: 6, name: "Emily Davis", department: "Operations", hourlyRate: 27.50 }
            ],
            timesheets: [],
            isManagerMode: false,
            currentPayPeriod: {
                startDate: CONFIG.DEFAULT_START_DATE,
                endDate: CONFIG.DEFAULT_END_DATE
            }
        };

        // Generate some sample timesheet data for the past week
        function generateSampleTimesheetData() {
            const now = new Date();
            const days = 7;

            STATE.employees.forEach(employee => {
                for (let i = 0; i < days; i++) {
                    const date = new Date(now);
                    date.setDate(date.getDate() - i);
                    const dateStr = Utils.formatDate(date);

                    // Skip weekends (optional)
                    if (date.getDay() === 0 || date.getDay() === 6) continue;

                    // Random clock in between 7:00 and 9:30
                    const clockInHour = 7 + Math.floor(Math.random() * 3);
                    const clockInMinute = Math.floor(Math.random() * 30);
                    const clockInTime = `${clockInHour.toString().padStart(2, '0')}:${clockInMinute.toString().padStart(2, '0')}:00`;

                    // Random clock out between 15:00 and 18:00
                    const clockOutHour = 15 + Math.floor(Math.random() * 3);
                    const clockOutMinute = Math.floor(Math.random() * 60);
                    const clockOutTime = `${clockOutHour.toString().padStart(2, '0')}:${clockOutMinute.toString().padStart(2, '0')}:00`;

                    const hours = Utils.calculateHours(clockInTime, clockOutTime);

                    // Random status (mostly approved)
                    const statusOptions = ['approved', 'approved', 'approved', 'pending', 'rejected'];
                    const status = statusOptions[Math.floor(Math.random() * statusOptions.length)];

                    STATE.timesheets.push({
                        id: Date.now() + Math.floor(Math.random() * 1000),
                        employeeId: employee.id,
                        employeeName: employee.name,
                        department: employee.department,
                        date: dateStr,
                        clockIn: clockInTime,
                        clockOut: clockOutTime,
                        hours: hours,
                        status: status
                    });
                }
            });
        }

        // Utility Functions
        const Utils = {
            formatTime: (date) => date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' }),
            formatDate: (date) => date.toISOString().split('T')[0],
            formatDateDisplay: (dateStr) => {
                const date = new Date(dateStr);
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
            },
            formatCurrency: (amount) => {
                return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);
            },

            calculateHours: (inTime, outTime) => {
                if (!inTime || !outTime) return 0;
                const [inH, inM, inS] = inTime.split(':').map(Number);
                const [outH, outM, outS] = outTime.split(':').map(Number);

                let inTotal = inH * 3600 + inM * 60 + inS;
                let outTotal = outH * 3600 + outM * 60 + outS;

                // Handle overnight shifts
                if (outTotal < inTotal) {
                    outTotal += 24 * 3600;
                }

                return ((outTotal - inTotal) / 3600).toFixed(2);
            },

            showNotification: (message, type = "success") => {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;

                let icon = 'info-circle';
                if (type === 'success') icon = 'check-circle';
                if (type === 'error') icon = 'exclamation-circle';
                if (type === 'warning') icon = 'exclamation-triangle';

                notification.innerHTML = `
            <i class="fas fa-${icon}"></i>
            <div>${message}</div>
          `;

                document.getElementById('notificationContainer').appendChild(notification);
                setTimeout(() => notification.remove(), 5000);
            },

            getEmployeeById: (id) => STATE.employees.find(e => e.id == id),

            getCurrentShift: () => {
                const now = new Date();
                const hours = now.getHours();

                if (hours >= 7 && hours < 15) return 'morning';
                if (hours >= 9 && hours < 17) return 'day';
                if (hours >= 13 && hours < 21) return 'evening';
                return 'night';
            }
        };

        // Core Functionality
        function initializeApp() {
            // Generate sample data if no timesheets exist
            if (STATE.timesheets.length === 0) {
                generateSampleTimesheetData();
            }

            populateEmployees();
            populateDepartmentFilter();
            populateEmployeeFilter();
            setInterval(updateClock, 1000);
            setupEventListeners();
            updateSummary();
            renderTimesheet();
            updateAnalytics();

            // Set default dates for payroll
            document.getElementById('payrollStartDate').value = Utils.formatDate(CONFIG.DEFAULT_START_DATE);
            document.getElementById('payrollEndDate').value = Utils.formatDate(CONFIG.DEFAULT_END_DATE);
        }

        function setupEventListeners() {
            document.getElementById('clockBtn').addEventListener('click', handleClockAction);
            document.getElementById('employeeSelect').addEventListener('change', updateClockButtonState);

            // Add event listeners for filters
            document.getElementById('departmentFilter').addEventListener('change', filterTimesheet);
            document.getElementById('dateFilter').addEventListener('change', filterTimesheet);
        }

        function toggleMobileMenu() {
            const navMenu = document.querySelector('.nav-menu');
            navMenu.classList.toggle('active');
        }

        function populateEmployees() {
            const select = document.getElementById('employeeSelect');
            select.innerHTML = '<option value="">Select Employee</option>' +
                STATE.employees.map(emp =>
                    `<option value="${emp.id}">${emp.name} - ${emp.department}</option>`
                ).join('');
        }

        function populateEmployeeFilter() {
            const select = document.getElementById('employeeFilter');
            select.innerHTML = '<option value="">All Employees</option>' +
                STATE.employees.map(emp =>
                    `<option value="${emp.id}">${emp.name}</option>`
                ).join('');
        }

        function populateDepartmentFilter() {
            const select = document.getElementById('departmentFilter');
            select.innerHTML = '<option value="">All Departments</option>' +
                CONFIG.DEPARTMENTS.map(dept =>
                    `<option value="${dept}">${dept}</option>`
                ).join('');
        }

        function updateClock() {
            document.getElementById('currentTime').textContent =
                new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        }

        function handleClockAction() {
            const employeeId = document.getElementById('employeeSelect').value;
            if (!employeeId) {
                Utils.showNotification('Please select an employee', 'error');
                return;
            }

            const employee = Utils.getEmployeeById(employeeId);
            const now = new Date();
            const today = Utils.formatDate(now);
            const currentTime = Utils.formatTime(now);

            const existingEntry = STATE.timesheets.find(
                t => t.employeeId == employeeId && t.date === today && !t.clockOut
            );

            if (existingEntry) {
                // Clock Out
                existingEntry.clockOut = currentTime;
                existingEntry.hours = Utils.calculateHours(existingEntry.clockIn, currentTime);
                existingEntry.status = 'pending';

                document.getElementById('clockBtn').innerHTML =
                    '<i class="fas fa-sign-in-alt"></i> Clock In';
                Utils.showNotification(`${employee.name} clocked out at ${currentTime}`);
            } else {
                // Clock In
                STATE.timesheets.unshift({
                    id: Date.now(),
                    employeeId: employeeId,
                    employeeName: employee.name,
                    department: employee.department,
                    date: today,
                    clockIn: currentTime,
                    clockOut: null,
                    hours: 0,
                    status: 'active'
                });

                document.getElementById('clockBtn').innerHTML =
                    '<i class="fas fa-sign-out-alt"></i> Clock Out';
                Utils.showNotification(`${employee.name} clocked in at ${currentTime}`);
            }

            updateSummary();
            renderTimesheet();
            updateAnalytics();
        }

        function updateClockButtonState() {
            const employeeId = document.getElementById('employeeSelect').value;
            const today = Utils.formatDate(new Date());
            const existingEntry = STATE.timesheets.find(
                t => t.employeeId == employeeId && t.date === today && !t.clockOut
            );

            const clockBtn = document.getElementById('clockBtn');
            clockBtn.innerHTML = existingEntry
                ? '<i class="fas fa-sign-out-alt"></i> Clock Out'
                : '<i class="fas fa-sign-in-alt"></i> Clock In';
        }

        function filterTimesheet() {
            renderTimesheet();
        }

        function filterTimesheetData() {
            const department = document.getElementById('departmentFilter').value;
            const date = document.getElementById('dateFilter').value;
            const status = document.getElementById('statusFilter').value;
            const employeeId = document.getElementById('employeeFilter').value;

            return STATE.timesheets.filter(entry => {
                const matchDepartment = !department || entry.department === department;
                const matchDate = !date || entry.date === date;
                const matchStatus = !status || entry.status === status;
                const matchEmployee = !employeeId || entry.employeeId == employeeId;

                return matchDepartment && matchDate && matchStatus && matchEmployee;
            });
        }

        function renderTimesheet() {
            const tbody = document.getElementById('timesheetTableBody');
            const filteredTimesheets = filterTimesheetData();

            tbody.innerHTML = filteredTimesheets.map(entry => `
          <tr>
            <td>${entry.employeeName}</td>
            <td>${entry.department}</td>
            <td>${Utils.formatDateDisplay(entry.date)}</td>
            <td>${entry.clockIn || '-'}</td>
            <td>${entry.clockOut || '-'}</td>
            <td>${entry.hours || '0.00'}</td>
            <td>
              <span class="badge badge-${entry.status}">
                ${entry.status.charAt(0).toUpperCase() + entry.status.slice(1)}
              </span>
            </td>
            <td class="btn-group">
              ${STATE.isManagerMode ? `
                <button class="btn btn-success btn-sm" onclick="approveTimesheet(${entry.id})" 
                  ${entry.status === 'approved' ? 'disabled' : ''}>
                  <i class="fas fa-check"></i>
                </button>
                <button class="btn btn-danger btn-sm" onclick="rejectTimesheet(${entry.id})"
                  ${entry.status === 'rejected' ? 'disabled' : ''}>
                  <i class="fas fa-times"></i>
                </button>
              ` : ''}
              <button class="btn btn-outline btn-sm" onclick="editTimesheet(${entry.id})">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-outline btn-sm" onclick="deleteTimesheet(${entry.id})">
                <i class="fas fa-trash"></i>
              </button>
            </td>
          </tr>
        `).join('');
        }

        function editTimesheet(id) {
            const timesheet = STATE.timesheets.find(t => t.id === id);
            if (!timesheet) return;

            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
          <div class="modal">
            <h2 class="modal-title">Edit Timesheet Entry</h2>
            
            <div class="form-group">
              <label class="form-label">Employee</label>
              <input type="text" class="form-control" value="${timesheet.employeeName}" disabled>
            </div>
            
            <div class="form-group">
              <label class="form-label">Date</label>
              <input type="date" id="editDate" class="form-control" value="${timesheet.date}">
            </div>
            
            <div class="form-group">
              <label class="form-label">Clock In</label>
              <input type="time" id="editClockIn" class="form-control" value="${timesheet.clockIn ? timesheet.clockIn.substring(0, 5) : ''}">
            </div>
            
            <div class="form-group">
              <label class="form-label">Clock Out</label>
              <input type="time" id="editClockOut" class="form-control" value="${timesheet.clockOut ? timesheet.clockOut.substring(0, 5) : ''}">
            </div>
            
            ${STATE.isManagerMode ? `
              <div class="form-group">
                <label class="form-label">Status</label>
                <select id="editStatus" class="form-control">
                  <option value="pending" ${timesheet.status === 'pending' ? 'selected' : ''}>Pending</option>
                  <option value="approved" ${timesheet.status === 'approved' ? 'selected' : ''}>Approved</option>
                  <option value="rejected" ${timesheet.status === 'rejected' ? 'selected' : ''}>Rejected</option>
                </select>
              </div>
            ` : ''}
            
            <div class="modal-footer">
              <button class="btn btn-danger" onclick="closeModal()">Cancel</button>
              <button class="btn btn-primary" onclick="saveTimesheetEdit(${id})">Save Changes</button>
            </div>
          </div>
        `;

            document.getElementById('modalContainer').appendChild(modal);
        }

        function saveTimesheetEdit(id) {
            const timesheet = STATE.timesheets.find(t => t.id === id);
            if (!timesheet) return;

            const date = document.getElementById('editDate').value;
            const clockIn = document.getElementById('editClockIn').value + ':00';
            const clockOut = document.getElementById('editClockOut').value + ':00';

            timesheet.date = date;
            timesheet.clockIn = clockIn;
            timesheet.clockOut = clockOut || null;
            timesheet.hours = clockOut ? Utils.calculateHours(clockIn, clockOut) : 0;

            if (STATE.isManagerMode) {
                timesheet.status = document.getElementById('editStatus').value;
            }

            closeModal();
            renderTimesheet();
            updateSummary();
            updateAnalytics();
            Utils.showNotification('Timesheet updated successfully');
        }

        function approveTimesheet(id) {
            const timesheet = STATE.timesheets.find(t => t.id === id);
            if (timesheet) {
                timesheet.status = 'approved';
                renderTimesheet();
                updateAnalytics();
                Utils.showNotification('Timesheet approved');
            }
        }

        function rejectTimesheet(id) {
            const timesheet = STATE.timesheets.find(t => t.id === id);
            if (timesheet) {
                timesheet.status = 'rejected';
                renderTimesheet();
                updateAnalytics();
                Utils.showNotification('Timesheet rejected', 'error');
            }
        }

        function deleteTimesheet(id) {
            if (confirm('Are you sure you want to delete this timesheet entry?')) {
                STATE.timesheets = STATE.timesheets.filter(t => t.id !== id);
                renderTimesheet();
                updateSummary();
                updateAnalytics();
                Utils.showNotification('Timesheet entry deleted');
            }
        }

        function updateSummary() {
            const today = Utils.formatDate(new Date());
            const todayEntries = STATE.timesheets.filter(t => t.date === today);

            document.getElementById('clockedInCount').textContent =
                todayEntries.filter(t => !t.clockOut).length;

            const totalHours = todayEntries
                .filter(t => t.clockOut)
                .reduce((sum, t) => sum + parseFloat(t.hours), 0);

            document.getElementById('totalHoursToday').textContent =
                totalHours.toFixed(2);

            document.getElementById('averageHours').textContent =
                (totalHours / (todayEntries.filter(t => t.clockOut).length || 1).toFixed(2));

            updateSummaryChart(todayEntries);
        }

        function updateSummaryChart(todayEntries) {
            const hoursByDept = {};
            CONFIG.DEPARTMENTS.forEach(dept => {
                hoursByDept[dept] = todayEntries
                    .filter(t => t.department === dept && t.clockOut)
                    .reduce((sum, t) => sum + parseFloat(t.hours), 0);
            });

            Plotly.newPlot('summaryChart', [{
                values: Object.values(hoursByDept),
                labels: Object.keys(hoursByDept),
                type: 'pie',
                hole: 0.4,
                marker: {
                    colors: ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899']
                }
            }], {
                title: 'Today\'s Hours by Department',
                height: 300,
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                margin: { t: 40, b: 20, l: 20, r: 20 }
            });
        }

        function updateAnalytics() {
            // Department Chart
            const deptData = CONFIG.DEPARTMENTS.map(dept => {
                const hours = STATE.timesheets
                    .filter(t => t.department === dept && t.clockOut && t.status === 'approved')
                    .reduce((sum, t) => sum + parseFloat(t.hours), 0);
                return { dept, hours };
            });

            Plotly.newPlot('departmentChart', [{
                x: deptData.map(d => d.dept),
                y: deptData.map(d => d.hours),
                type: 'bar',
                marker: { color: '#3b82f6' }
            }], {
                title: 'Total Hours by Department',
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                margin: { t: 40, b: 40, l: 40, r: 20 }
            });

            // Trend Chart - Last 7 days
            const dates = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                dates.push(Utils.formatDate(date));
            }

            const dailyHours = dates.map(date => {
                const hours = STATE.timesheets
                    .filter(t => t.date === date && t.clockOut && t.status === 'approved')
                    .reduce((sum, t) => sum + parseFloat(t.hours), 0);
                return { date, hours };
            });

            Plotly.newPlot('trendChart', [{
                x: dailyHours.map(d => Utils.formatDateDisplay(d.date)),
                y: dailyHours.map(d => d.hours),
                type: 'scatter',
                mode: 'lines+markers',
                line: { color: '#10b981' },
                marker: { color: '#10b981', size: 8 }
            }], {
                title: 'Daily Hours Trend (Last 7 Days)',
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                margin: { t: 40, b: 60, l: 40, r: 20 },
                xaxis: {
                    tickangle: -45
                }
            });

            // Status Chart
            const statusCounts = {
                approved: STATE.timesheets.filter(t => t.status === 'approved').length,
                pending: STATE.timesheets.filter(t => t.status === 'pending').length,
                rejected: STATE.timesheets.filter(t => t.status === 'rejected').length
            };

            Plotly.newPlot('statusChart', [{
                values: Object.values(statusCounts),
                labels: Object.keys(statusCounts).map(
                    status => status.charAt(0).toUpperCase() + status.slice(1)
                ),
                type: 'pie',
                hole: 0.4,
                marker: {
                    colors: ['#10b981', '#f59e0b', '#ef4444']
                }
            }], {
                title: 'Timesheet Status Distribution',
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                margin: { t: 40, b: 20, l: 20, r: 20 },
                showlegend: true,
                legend: {
                    orientation: 'h',
                    y: -0.2
                }
            });
        }

        function refreshSummary() {
            updateSummary();
            updateAnalytics();
            Utils.showNotification('Dashboard refreshed');
        }

        function showManagerPortal() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
          <div class="modal">
            <h2 class="modal-title">
              <i class="fas fa-user-shield"></i> Manager Portal
            </h2>
            
            <div class="form-group">
              <label for="managerPassword" class="form-label">Manager Password</label>
              <input type="password" class="form-control" id="managerPassword" 
                     placeholder="Enter manager password" />
            </div>
            
            <div class="modal-footer">
              <button class="btn btn-danger" onclick="closeModal()">Cancel</button>
              <button class="btn btn-primary" onclick="validateManager()">Login</button>
            </div>
          </div>
        `;
            document.getElementById('modalContainer').appendChild(modal);
        }

        function validateManager() {
            const password = document.getElementById('managerPassword').value;
            if (password === CONFIG.MANAGER_PASSWORD) {
                STATE.isManagerMode = true;
                Utils.showNotification('Manager mode activated');
                closeModal();
                renderTimesheet();
            } else {
                Utils.showNotification('Invalid password', 'error');
            }
        }

        function showPayrollReport() {
            document.getElementById('payrollReport').style.display = 'block';
            window.scrollTo({
                top: document.getElementById('payrollReport').offsetTop - 20,
                behavior: 'smooth'
            });
        }

        function hidePayrollReport() {
            document.getElementById('payrollReport').style.display = 'none';
        }

        function generatePayroll() {
            showPayrollReport();
            generatePayrollReport();
        }

        function generatePayrollReport() {
            const startDate = document.getElementById('payrollStartDate').value;
            const endDate = document.getElementById('payrollEndDate').value;

            if (!startDate || !endDate) {
                Utils.showNotification('Please select both start and end dates', 'error');
                return;
            }

            // Filter timesheets for the selected period
            const payrollData = STATE.timesheets.filter(t =>
                t.date >= startDate && t.date <= endDate && t.status === 'approved'
            );

            // Group by employee and calculate totals
            const employeeTotals = {};

            payrollData.forEach(entry => {
                if (!employeeTotals[entry.employeeId]) {
                    const employee = Utils.getEmployeeById(entry.employeeId);
                    employeeTotals[entry.employeeId] = {
                        name: employee.name,
                        department: employee.department,
                        hourlyRate: employee.hourlyRate,
                        totalHours: 0,
                        grossPay: 0
                    };
                }

                employeeTotals[entry.employeeId].totalHours += parseFloat(entry.hours);
            });

            // Calculate gross pay for each employee
            Object.keys(employeeTotals).forEach(empId => {
                const emp = employeeTotals[empId];
                emp.grossPay = emp.totalHours * emp.hourlyRate;
            });

            // Render the payroll report
            const payrollTableBody = document.getElementById('payrollTableBody');
            payrollTableBody.innerHTML = Object.values(employeeTotals).map(emp => `
          <tr>
            <td>${emp.name}</td>
            <td>${emp.department}</td>
            <td>${emp.totalHours.toFixed(2)}</td>
            <td>${Utils.formatCurrency(emp.hourlyRate)}</td>
            <td>${Utils.formatCurrency(emp.grossPay)}</td>
          </tr>
        `).join('');

            // Calculate payroll total
            const payrollTotal = Object.values(employeeTotals).reduce(
                (sum, emp) => sum + emp.grossPay, 0
            );

            document.getElementById('payrollTotal').textContent =
                `Total Payroll: ${Utils.formatCurrency(payrollTotal)}`;

            // Update payroll summary
            const payrollSummary = document.getElementById('payrollSummary');
            payrollSummary.innerHTML = `
          <div class="stat-card">
            <div class="stat-icon primary">
              <i class="fas fa-users"></i>
            </div>
            <div class="stat-content">
              <div class="stat-title">Employees</div>
              <div class="stat-value">${Object.keys(employeeTotals).length}</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon success">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
              <div class="stat-title">Total Hours</div>
              <div class="stat-value">
                ${Object.values(employeeTotals).reduce((sum, emp) => sum + emp.totalHours, 0).toFixed(2)}
              </div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon warning">
              <i class="fas fa-money-bill-wave"></i>
            </div>
            <div class="stat-content">
              <div class="stat-title">Average Pay</div>
              <div class="stat-value">
                ${Utils.formatCurrency(payrollTotal / (Object.keys(employeeTotals).length || 1))}
              </div>
            </div>
          </div>
        `;

            Utils.showNotification(`Payroll report generated for ${Utils.formatDateDisplay(startDate)} to ${Utils.formatDateDisplay(endDate)}`);
        }

        function exportPayroll() {
            const startDate = document.getElementById('payrollStartDate').value;
            const endDate = document.getElementById('payrollEndDate').value;

            if (!startDate || !endDate) {
                Utils.showNotification('Please generate a report first', 'error');
                return;
            }

            const payrollData = [];
            const rows = document.querySelectorAll('#payrollTableBody tr');

            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                payrollData.push({
                    Employee: cells[0].textContent,
                    Department: cells[1].textContent,
                    'Total Hours': cells[2].textContent,
                    'Hourly Rate': cells[3].textContent,
                    'Gross Pay': cells[4].textContent
                });
            });

            const csv = convertToCSV(payrollData);
            downloadCSV(csv, `payroll_report_${startDate}_to_${endDate}.csv`);
            Utils.showNotification('Payroll report exported');
        }

        function printPayroll() {
            const printContent = document.getElementById('payrollReport').innerHTML;
            const originalContent = document.body.innerHTML;

            document.body.innerHTML = `
          <h1 style="text-align: center; margin-bottom: 1rem;">TimeTrack Pro - Payroll Report</h1>
          <div style="text-align: center; margin-bottom: 1rem; color: #666;">
            ${document.getElementById('payrollStartDate').value} to ${document.getElementById('payrollEndDate').value}
          </div>
          ${printContent}
        `;

            window.print();
            document.body.innerHTML = originalContent;
            Utils.showNotification('Payroll report printed');
        }

        function exportTimesheet() {
            const filteredTimesheets = filterTimesheetData();

            if (filteredTimesheets.length === 0) {
                Utils.showNotification('No timesheet data to export', 'error');
                return;
            }

            const csv = convertToCSV(filteredTimesheets.map(t => ({
                Employee: t.employeeName,
                Department: t.department,
                Date: t.date,
                'Clock In': t.clockIn,
                'Clock Out': t.clockOut || '',
                Hours: t.hours,
                Status: t.status
            })));

            downloadCSV(csv, 'timesheet_export.csv');
            Utils.showNotification('Timesheet data exported');
        }

        function convertToCSV(data) {
            if (data.length === 0) return '';

            const headers = Object.keys(data[0]);
            const rows = data.map(row =>
                headers.map(header => JSON.stringify(row[header])).join(',')
            );

            return [headers.join(','), ...rows].join('\n');
        }

        function downloadCSV(csv, filename) {
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function closeModal() {
            document.getElementById('modalContainer').innerHTML = '';
        }

        function showHelp() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
          <div class="modal">
            <h2 class="modal-title">
              <i class="fas fa-question-circle"></i> Help & Support
            </h2>
            
            <div style="margin-bottom: 1rem;">
              <h3 style="font-size: 1rem; margin-bottom: 0.5rem;">How to use TimeTrack Pro</h3>
              <p style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 1rem;">
                Select your employee from the dropdown and click "Clock In" to start tracking your time. 
                When you're done, click "Clock Out" to record your working hours.
              </p>
              
              <h3 style="font-size: 1rem; margin-bottom: 0.5rem;">Manager Features</h3>
              <p style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 1rem;">
                Managers can approve or reject timesheets by logging in through the Manager Portal.
                Use the password provided by your administrator.
              </p>
              
              <h3 style="font-size: 1rem; margin-bottom: 0.5rem;">Need more help?</h3>
              <p style="font-size: 0.875rem; color: var(--gray-600);">
                Contact support at <strong>support@timetrackpro.com</strong> or call <strong>(555) 123-4567</strong>.
              </p>
            </div>
            
            <div class="modal-footer">
              <button class="btn btn-primary" onclick="closeModal()">Close</button>
            </div>
          </div>
        `;

            document.getElementById('modalContainer').appendChild(modal);
        }

        function showSettings() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
          <div class="modal">
            <h2 class="modal-title">
              <i class="fas fa-cog"></i> Settings
            </h2>
            
            <div class="form-group">
              <label class="form-label">Theme</label>
              <select class="form-control">
                <option>Light</option>
                <option>Dark</option>
                <option>System</option>
              </select>
            </div>
            
            <div class="form-group">
              <label class="form-label">Time Format</label>
              <select class="form-control">
                <option>24-hour</option>
                <option>12-hour</option>
              </select>
            </div>
            
            <div class="form-group">
              <label class="form-label">Default View</label>
              <select class="form-control">
                <option>Dashboard</option>
                <option>Timesheet</option>
                <option>Analytics</option>
              </select>
            </div>
            
            <div class="modal-footer">
              <button class="btn btn-danger" onclick="closeModal()">Cancel</button>
              <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
            </div>
          </div>
        `;

            document.getElementById('modalContainer').appendChild(modal);
        }

        function saveSettings() {
            closeModal();
            Utils.showNotification('Settings saved successfully');
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>

</html>